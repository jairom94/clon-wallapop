<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&family=Asap:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/hero.css">
    <title>Document</title>
</head>

<body>
    <div class="container">
        <header class="header-main">
            <div class="line-1">
                <div class="logo">
                    <img src="./imgs/logo.svg" alt="logo wallapop">
                </div>
                <div class="frm-search">
                    <input class="txt_search" type="text" name="search" id="search" placeholder="Busca vinilos">
                    <div class="ico-search">
                        <iconify-icon icon="octicon:search-16"></iconify-icon>
                    </div>
                    <div class="placeholder">
                        
                    </div>
                </div>
            </div>
            <div class="line-2">
                <ul class="menu-horizontal">
                    <li>
                        <div class="ico-burger">
                            <iconify-icon icon="tabler:menu-2"></iconify-icon>
                        </div>
                        <span>
                            Todas las categorías
                        </span>
                    </li>
                    <li>
                        <span>
                            Motor y Accesorios
                        </span>
                    </li>
                    <li>
                        <span>
                            Moda y accesorios
                        </span>
                    </li>
                </ul>
            </div>
            <div class="menu-vertical">
                <div class="cont-button-close">
                    <button>
                        <div class="ico-close">
                            <iconify-icon icon="ic:baseline-close"></iconify-icon>
                        </div>
                    </button>
                </div>
                <p>Todas las categorías</p>
                <nav>
                    <ul>
                        <li>
                            <a href="#">
                                <div class="ico">
                                    <iconify-icon icon="material-symbols:border-all-rounded"></iconify-icon>
                                </div>
                                <span>
                                    Ver todo
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <div class="ico">
                                    <iconify-icon icon="material-symbols:directions-car-outline-sharp"></iconify-icon>
                                </div>
                                <span>
                                    Coche
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <div class="ico">
                                    <iconify-icon icon="material-symbols:motorcycle-rounded"></iconify-icon>
                                </div>
                                <span>
                                    Motos
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <div class="ico">
                                    <iconify-icon icon="material-symbols:warehouse-outline-rounded"></iconify-icon>
                                </div>
                                <span>
                                    Inmobiliaria
                                </span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </header>
        <main>
            <section class="hero">
                <div class="box bg-hero-1">
                    <div class="title">
                        <p class="line-hero-1">
                            Compra y vende articulos
                            <br>
                            <span>de segunda mano.</span>
                        </p>
                        <button class="btn-hero-1">
                            <div>
                                <iconify-icon icon="octicon:plus-circle-24"></iconify-icon>
                            </div>
                            <span>
                                Vender Ahora
                            </span>
                        </button>
                    </div>
                    <figure class="cont-img">
                        <img src="./imgs/hero1.avif" alt="">
                    </figure>
                </div>
                <div class="box bg-hero-2">
                    <div class="title">
                        <p class="line-hero-1">
                            ¿Quién necesita trastero,
                            <br>
                            <span>teniendo Wallapop?</span>
                        </p>
                        <button class="btn-hero-1">
                            <span>
                                Vende lo que no usas
                            </span>
                        </button>
                    </div>
                    <figure class="cont-img">
                        <img src="./imgs/hero3.avif" alt="">
                    </figure>
                </div>
                <div class="box bg-hero-3">
                    <div class="title">
                        <p class="line-hero-3">
                            Potencia tu negocio online
                            <br>
                            <span>con Wallapop PRO.</span>
                        </p>
                        <button class="btn-hero-3">
                            <span>
                                Saber más
                            </span>
                        </button>
                    </div>
                    <figure class="cont-img">
                        <img src="./imgs/hero2.avif" alt="">
                    </figure>
                </div>
            </section>
        </main>
        <footer></footer>
    </div>
    <script>
        const $ = document.querySelector.bind(document);
        const $$ = document.querySelectorAll.bind(document);
        const el = document.querySelector('div')
        const hero = $('.hero');
        const heroChildren = Array.from(hero.children)
        const resetStyles = () => {
            heroChildren.forEach(item => {
                item.classList.add('transitionFlexGrowSlow');
                item.classList.remove('transitionFlexFast');
                item.classList.remove('expand');
            })
        }
        document.addEventListener('DOMContentLoaded', () => {
            let currentIndex = 1;
            let animationID;
            let isAnimating = true;
            const firstElement = heroChildren[0];
            firstElement.classList.add('expand');

            heroChildren.forEach(el => {
                el.addEventListener('mouseenter', (e) => {
                    isAnimating = false;
                    resetStyles();
                    // e.target.style.transitionProperty = 'flex-grow';
                    // e.target.style.transitionDuration = '.15s';
                    // e.target.style.transitionTimingFunction = 'cubic-bezier(0.47, 0.43, 0.57, 0.6)';
                    e.target.classList.remove('transitionFlexGrowSlow');
                    e.target.classList.add('transitionFlexFast');
                    e.target.classList.add('expand');
                });
                el.addEventListener('mouseleave', (e) => {
                    isAnimating = true;
                    resetStyles();
                    const targetIndex = heroChildren.findIndex(node => node === e.target)
                    currentIndex = targetIndex + 1;
                    if (currentIndex >= 3) currentIndex = 0;
                    e.target.classList.add('expand');
                    setTimeout(() => {
                        animate();
                    }, 1000)
                });
            })
            function animate() {
                if (!isAnimating) return;
                setTimeout(() => {

                    resetStyles();
                    // console.log(currentIndex,'index');
                    const elementSelected = heroChildren[currentIndex];
                    // void elementSelected.offsetHeight; 
                    elementSelected.classList.add('expand');
                    elementSelected.addEventListener('transitionend', function handler(e) {
                        // console.log('terminando transicion');
                        elementSelected.removeEventListener('transitionend', handler);
                        if (!isAnimating) return;
                        currentIndex++;
                        if (currentIndex === heroChildren.length) {
                            currentIndex = 0
                        }
                        animationID = requestAnimationFrame(animate)

                    })
                }, 5000)
            }

            //animate();
        })

    </script>
</body>

</html>